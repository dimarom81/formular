

<!DOCTYPE html>
<html lang="en">
<head>
	<title>CommentService</title>
	<meta name="keywords" content="contentbox.model.comments.concurrent.Callable interface">
	<!-- common assets -->
	

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel ="stylesheet" type="text/css" href="../../../bootstrap/css/bootstrap.min.css">
<link rel ="stylesheet" type="text/css" href="../../../stylesheet.css">
	
<link href='https://fonts.googleapis.com/css?family=Ubuntu:400,300,300italic,400italic,700,700italic|Ubuntu+Mono' rel='stylesheet' type='text/css' />
	
<script src="../../../bootstrap/js/jquery-2.1.0.min.js" type="text/javascript"></script>
<script src="../../../bootstrap/js/bootstrap.min.js" type="text/javascript"></script>

<script>
$(document).ready(function() {
	// Global Tool Tip Settings
	$( '[title]' ).tooltip({
		 animation: 'slide',
		 delay: { show: 250, hide: 250 }
	});
});
</script>
	<!-- syntax highlighter -->
	<link type="text/css" rel="stylesheet" href="../../../highlighter/styles/shCoreDefault.css">
	<script src="../../../highlighter/scripts/shCore.js"></script>
	<script src="../../../highlighter/scripts/shBrushColdFusion.js"></script>
	<script src="../../../highlighter/scripts/shBrushXml.js"></script>
	<script src="../../../highlighter/scripts/shBrushSql.js"></script>
	<script src="../../../highlighter/scripts/shBrushJScript.js"></script>
	<script src="../../../highlighter/scripts/shBrushJava.js"></script>
	<script src="../../../highlighter/scripts/shBrushCss.js"></script>
	<script type="text/javascript">SyntaxHighlighter.all();</script>
</head>

<body class="withNavbar">






<!-- ========= START OF NAVBAR ======= -->
<a name="navbar_top"></a>
<a href="#skip-navbar_top" title="skip navigation links"></a>	

<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container-fluid">
    
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#class-navigation">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="#"><strong>ContentBox Modular CMS v2.1.0</strong></a>
		</div>

	    <div class="collapse navbar-collapse" id="class-navigation">
	    	<ul class="nav navbar-nav">
				
					
					<li><a href="../../../overview-summary.html"><i class="glyphicon glyphicon-plane"></i> overview</a></li>
					
				

				
					<li><a href="package-summary.html"><i class="glyphicon glyphicon-folder-open"></i> &nbsp;package</a></li>
				

			  	
					<li class="dropdown active">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="glyphicon glyphicon-file"></i> class <b class="caret"></b></a>

						<ul class="dropdown-menu">
							<li><a href="#class">Class Definition</a></li>
							<li><a href="#constructor_summary">Constructor Summary</a></li>
							<li><a href="#constructor_detail">Constructor Detail</a></li>
							<li><a href="#inherited_methods">Inherited Methods</a></li>
							<li><a href="#method_summary">Method Summary</a></li>
							<li><a href="#method_detail">Method Detail</a></li>
							<li><a href="#property_summary">Property Summary</a></li>
							<li><a href="#property_detail">Property Detail</a></li>
							
						</ul>
					</li>
				
	      	</ul>

			<ul class="nav navbar-nav navbar-right">
				<li><a href="../../../index.html?contentbox/model/comments/CommentService.html" target="_top">
					<i class="glyphicon glyphicon-fullscreen"></i> Frames
					</a>
				</li>
			</ul>
	    </div>

	</div>
</nav>	

<a name="skip-navbar_top"></a>
<!-- ========= END OF NAVBAR ========= -->

<!-- ======== start of class data ======== -->
<a name="class"><!-- --></a>

<!-- Package -->
<div class="pull-right">
	<a href="package-summary.html" title="Package: contentbox.model.comments"><span class="label label-success">contentbox.model.comments</span></a>
</div>

<h2>

Class

 CommentService</h2>








	
		
	
	

	
		
		
			
		
	
	

	
		
		
			
		
	
	

	
		
		
			
		
	
	


<!-- Inheritance Tree-->
<pre>railo-context.Component
        <img src="../../../resources/inherit.gif" alt="extended by ">coldbox.system.orm.hibernate.BaseORMService
            <img src="../../../resources/inherit.gif" alt="extended by ">coldbox.system.orm.hibernate.VirtualEntityService
                <img src="../../../resources/inherit.gif" alt="extended by ">contentbox.model.comments.CommentService
</pre>

<div class="panel panel-default">
	<div class="panel-heading"><strong>Class Attributes:</strong></div>
		<div class="panel-body">
		
		
			
		
			
		
			
			
			<li class="label label-danger label-annotations">
				singleton 
				
			</li>
			&nbsp;
			
		
			
		
			
			
			<li class="label label-danger label-annotations">
				synchronized 
				
				: false		
				
			</li>
			&nbsp;
			
		
			
		
			
		
			
		
			
		
			
			
			<li class="label label-danger label-annotations">
				accessors 
				
				: false		
				
			</li>
			&nbsp;
			
		
			
		
			
			
			<li class="label label-danger label-annotations">
				persistent 
				
				: false		
				
			</li>
			&nbsp;
			
		
			
		
			
		
		
	</div>
</div>


	
	







<div id="class-hint">
	<p>ContentBox - A Modular Content Platform
Copyright 2012 by Luis Majano and Ortus Solutions, Corp
www.ortussolutions.com
Apache License, Version 2.0
Copyright Since [2012] [Luis Majano and Ortus Solutions,Corp]
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
Service to handle comment operations.</p>
</div>





<!-- ========== METHOD SUMMARY =========== -->

<a name="property_summary"><!-- --></a>
<table class="table table-bordered table-hover">
	<tr class="info">
		<th align="left" colspan="5">
			<strong>Property Summary</strong>
		</th>
	</tr>
	<tr class="info">
		<th align="left">
			<strong>type</strong>
		</th>
		<th align="left">
			<strong>property</strong>
		</th>
		<th align="left">
			<strong>default</strong>
		</th>
		<th align="left">
			<strong>serializable</strong>
		</th>
		<th align="left">
			<strong>required</strong>
		</th>
	</tr>

	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>any</code>
		</td>
		<td>
			<strong><a href="CommentService.html#CBHelper()">CBHelper</A></strong> 
			<br>
			
			<br><br>
			<ul>
			
				
			
				
			
				
			
				
				<li class="label label-default label-annotations">inject = id:CBHelper@cb</li>
				
			
				
			
				
			
				
			
			</ul>

		</td>
		<td align="right" valign="top" width="1%">
			
		</td>
		<td align="right" valign="top" width="1%">
			<code>
				true
			</code>
		</td>
		<td align="right" valign="top" width="1%">
			<code>
				false
			</code>
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>any</code>
		</td>
		<td>
			<strong><a href="CommentService.html#interceptorService()">interceptorService</A></strong> 
			<br>
			
			<br><br>
			<ul>
			
				
			
				
			
				
			
				
				<li class="label label-default label-annotations">inject = coldbox:interceptorService</li>
				
			
				
			
				
			
				
			
			</ul>

		</td>
		<td align="right" valign="top" width="1%">
			
		</td>
		<td align="right" valign="top" width="1%">
			<code>
				true
			</code>
		</td>
		<td align="right" valign="top" width="1%">
			<code>
				false
			</code>
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>any</code>
		</td>
		<td>
			<strong><a href="CommentService.html#log()">log</A></strong> 
			<br>
			
			<br><br>
			<ul>
			
				
			
				
			
				
			
				
				<li class="label label-default label-annotations">inject = logbox:logger:{this}</li>
				
			
				
			
				
			
				
			
			</ul>

		</td>
		<td align="right" valign="top" width="1%">
			
		</td>
		<td align="right" valign="top" width="1%">
			<code>
				true
			</code>
		</td>
		<td align="right" valign="top" width="1%">
			<code>
				false
			</code>
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>any</code>
		</td>
		<td>
			<strong><a href="CommentService.html#mailService()">mailService</A></strong> 
			<br>
			
			<br><br>
			<ul>
			
				
			
				
			
				
			
				
				<li class="label label-default label-annotations">inject = coldbox:plugin:MailService</li>
				
			
				
			
				
			
				
			
			</ul>

		</td>
		<td align="right" valign="top" width="1%">
			
		</td>
		<td align="right" valign="top" width="1%">
			<code>
				true
			</code>
		</td>
		<td align="right" valign="top" width="1%">
			<code>
				false
			</code>
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>any</code>
		</td>
		<td>
			<strong><a href="CommentService.html#renderer()">renderer</A></strong> 
			<br>
			
			<br><br>
			<ul>
			
				
			
				
			
				
			
				
				<li class="label label-default label-annotations">inject = provider:ColdBoxRenderer</li>
				
			
				
			
				
			
				
			
			</ul>

		</td>
		<td align="right" valign="top" width="1%">
			
		</td>
		<td align="right" valign="top" width="1%">
			<code>
				true
			</code>
		</td>
		<td align="right" valign="top" width="1%">
			<code>
				false
			</code>
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>any</code>
		</td>
		<td>
			<strong><a href="CommentService.html#settingService()">settingService</A></strong> 
			<br>
			
			<br><br>
			<ul>
			
				
			
				
			
				
			
				
				<li class="label label-default label-annotations">inject = id:settingService@cb</li>
				
			
				
			
				
			
				
			
			</ul>

		</td>
		<td align="right" valign="top" width="1%">
			
		</td>
		<td align="right" valign="top" width="1%">
			<code>
				true
			</code>
		</td>
		<td align="right" valign="top" width="1%">
			<code>
				false
			</code>
		</td>
	</tr>
	
	</tr>
</table>



	
	
	<!-- ======== CONSTRUCTOR SUMMARY ======== -->

	<a name="constructor_summary"><!-- --></a>
	<table class="table table-bordered table-hover">
		<tr class="info">
			<th align="left" colspan="2">
				<strong>Constructor Summary</strong>
			</th>
		</tr>
		<tr>
			
			<td>
				<strong><a href="CommentService.html#init()">init</A></strong>()
				<br>
				
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Constructor.
				
			</td>
		</tr>
	</table>





<!-- ========== METHOD SUMMARY =========== -->

<a name="method_summary"><!-- --></a>
<table class="table table-bordered table-hover">
	<tr class="info">
		<th align="left" colspan="2">
			<strong>Method Summary</strong>
		</th>
	</tr>

	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>private&nbsp;any</code>
		</td>
		<td>
			<strong><a href="CommentService.html#activateURLs()">activateURLs</A></strong>(any text)
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Activate URL's from text.
			
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>private&nbsp;boolean</code>
		</td>
		<td>
			<strong><a href="CommentService.html#anyKeywordMatch()">anyKeywordMatch</A></strong>([any comment], [any matchList])
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Regex matching of a list of entries against a comment and matching keyword list.
			
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>any</code>
		</td>
		<td>
			<strong><a href="CommentService.html#bulkStatus()">bulkStatus</A></strong>([any commentID], [any status])
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bulk Updates.
			
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>void</code>
		</td>
		<td>
			<strong><a href="CommentService.html#deleteUnApprovedComments()">deleteUnApprovedComments</A></strong>([numeric expirationDays='0'])
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deletes unapproved comments.
			
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>any</code>
		</td>
		<td>
			<strong><a href="CommentService.html#findApprovedComments()">findApprovedComments</A></strong>([any contentID], [any contentType], [any max='0'], [any offset='0'], [any sortOrder='desc'])
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Comment listing for UI of approved comments, returns struct of results=[comments,count].
			
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>numeric</code>
		</td>
		<td>
			<strong><a href="CommentService.html#getApprovedCommentCount()">getApprovedCommentCount</A></strong>()
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the total number of approved comments in the system.
			
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>numeric</code>
		</td>
		<td>
			<strong><a href="CommentService.html#getUnApprovedCommentCount()">getUnApprovedCommentCount</A></strong>()
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the total number of unapproved comments in the system.
			
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>private&nbsp;boolean</code>
		</td>
		<td>
			<strong><a href="CommentService.html#runModerationRules()">runModerationRules</A></strong>(any comment, any settings)
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run moderation rules on an incoming comment and set of contentbox settings.
			
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>struct</code>
		</td>
		<td>
			<strong><a href="CommentService.html#saveComment()">saveComment</A></strong>(any comment)
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Save a comment according to our rules and process it.
			
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>struct</code>
		</td>
		<td>
			<strong><a href="CommentService.html#search()">search</A></strong>([any search=''], [any isApproved], [any contentID], [any max='0'], [any offset='0'])
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment search returns struct with keys [comments,count].
			
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>private&nbsp;void</code>
		</td>
		<td>
			<strong><a href="CommentService.html#sendNotificationEmails()">sendNotificationEmails</A></strong>(any comment, any settings)
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send a notification email for comments.
			
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>void</code>
		</td>
		<td>
			<strong><a href="CommentService.html#sendSubscriptionNotifications()">sendSubscriptionNotifications</A></strong>(any comment)
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends subscription emails to subscribers of the content.
			
		</td>
	</tr>
	
	
	
	<tr>
		<td align="right" valign="top" width="1%">
			<code>private&nbsp;boolean</code>
		</td>
		<td>
			<strong><a href="CommentService.html#userHasPreviousAcceptedComment()">userHasPreviousAcceptedComment</A></strong>(any email)
			<br>
			
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check if the user has already a comment in the system.
			
		</td>
	</tr>
	
</table>



<a name="inherited_methods"><!-- --></a>


	

	

	&nbsp;
	<a name="methods_inherited_from_class_coldbox.system.orm.hibernate.VirtualEntityService"><!-- --></a>
	<table class="table table-hover table-bordered">
		<tr class="info">
			<th align="left">
				<strong>Methods inherited from class <kbd>coldbox.system.orm.hibernate.VirtualEntityService</kbd></strong>
			</th>
		</tr>
		<tr>
			<td>
				
				
				
					
					
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
				
				
					<a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#clear()">clear</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#convertIDValueToJavaType()">convertIDValueToJavaType</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#convertValueToJavaType()">convertValueToJavaType</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#count()">count</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#countWhere()">countWhere</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#criteriaCount()">criteriaCount</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#criteriaQuery()">criteriaQuery</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#deleteAll()">deleteAll</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#deleteByID()">deleteByID</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#deleteByQuery()">deleteByQuery</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#deleteWhere()">deleteWhere</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#evict()">evict</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#executeQuery()">executeQuery</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#exists()">exists</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#findAllWhere()">findAllWhere</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#findWhere()">findWhere</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#get()">get</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#getAll()">getAll</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#getDatasource()">getDatasource</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#getEntityName()">getEntityName</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#getKey()">getKey</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#getPropertyNames()">getPropertyNames</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#getSessionStatistics()">getSessionStatistics</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#getTableName()">getTableName</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#isSessionDirty()">isSessionDirty</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#list()">list</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#new()">new</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#newCriteria()">newCriteria</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#onMissingMethod()">onMissingMethod</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#setDatasource()">setDatasource</a>, <a href="../../..//coldbox/system/orm/hibernate/VirtualEntityService.html#setEntityName()">setEntityName</a>
				
			</td>
		</tr>
	</table>

	

	

	&nbsp;
	<a name="methods_inherited_from_class_coldbox.system.orm.hibernate.BaseORMService"><!-- --></a>
	<table class="table table-hover table-bordered">
		<tr class="info">
			<th align="left">
				<strong>Methods inherited from class <kbd>coldbox.system.orm.hibernate.BaseORMService</kbd></strong>
			</th>
		</tr>
		<tr>
			<td>
				
				
				
					
					
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
				
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
				
					
					
				
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
				
					
					
				
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
					
					
					
						
					
					
					
					
				
				
				
					<a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#$delete()">$delete</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#$deleteAll()">$deleteAll</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#$deleteByID()">$deleteByID</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#$deleteByQuery()">$deleteByQuery</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#$deleteWhere()">$deleteWhere</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#$save()">$save</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#$saveAll()">$saveAll</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#$transactioned()">$transactioned</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#compileHQLFromDynamicMethod()">compileHQLFromDynamicMethod</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#createCriteriaQuery()">createCriteriaQuery</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#createService()">createService</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#delete()">delete</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#evictEntity()">evictEntity</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#evictQueries()">evictQueries</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#findAll()">findAll</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#findByExample()">findByExample</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#findDynamically()">findDynamically</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#findIt()">findIt</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#getDefaultAsQuery()">getDefaultAsQuery</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#getEntityGivenName()">getEntityGivenName</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#getEventHandling()">getEventHandling</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#getHQLDynamicCache()">getHQLDynamicCache</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#getORM()">getORM</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#getORMEventHandler()">getORMEventHandler</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#getQueryCacheRegion()">getQueryCacheRegion</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#getRestrictions()">getRestrictions</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#getUseQueryCaching()">getUseQueryCaching</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#getUseTransactions()">getUseTransactions</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#merge()">merge</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#populate()">populate</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#populateFromJSON()">populateFromJSON</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#populateFromQuery()">populateFromQuery</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#populateFromXML()">populateFromXML</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#populateWithPrefix()">populateWithPrefix</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#refresh()">refresh</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#save()">save</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#saveAll()">saveAll</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#sessionContains()">sessionContains</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#setDefaultAsQuery()">setDefaultAsQuery</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#setEventHandling()">setEventHandling</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#setHQLDynamicCache()">setHQLDynamicCache</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#setORM()">setORM</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#setORMEventHandler()">setORMEventHandler</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#setQueryCacheRegion()">setQueryCacheRegion</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#setUseQueryCaching()">setUseQueryCaching</a>, <a href="../../..//coldbox/system/orm/hibernate/BaseORMService.html#setUseTransactions()">setUseTransactions</a>
				
			</td>
		</tr>
	</table>

	

	

	&nbsp;
	<a name="methods_inherited_from_class_railo-context.Component"><!-- --></a>
	<table class="table table-hover table-bordered">
		<tr class="info">
			<th align="left">
				<strong>Methods inherited from class <kbd>railo-context.Component</kbd></strong>
			</th>
		</tr>
		<tr>
			<td>
				
				
				
				
				
					<span class="label label-warning"><em>None</em></span>
				
			</td>
		</tr>
	</table>


<hr>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

	<a name="constructor_detail"><!-- --></a>
	<table class="table table-bordered">
		<tr class="info">
			<th colspan="1" align="left">
				<strong>Constructor Detail</strong>
			</th>
		</tr>
	</table>

	<a name="init()"><!-- --></a><h3>
	init</h3>
	<kbd>public <strong>init</strong>()</kbd>

	<br><br>

	
	<p>Constructor</p>
	

	
	<hr>


<!-- ============ PROPERTY DETAIL ========== -->

	<a name="property_detail"><!-- --></a>
	<table class="table table-bordered">
		<tr class="info">
			<th colspan="1" align="left">
				<strong>Property Detail</strong>
			</th>
		</tr>
	</table>

	
		
		<a name="CBHelper()"><!-- --></a>
		<h3>CBHelper</h3>

		<kbd>
			property any 
			<strong>CBHelper</strong>
			
		</kbd>

		<br><br>
		

		<dl>
		<dt><strong>Attributes:</strong></dt>
		
			
		
			
			<dd><code>required</code> - false</dd>
			
		
			
		
			
			<dd><code>inject</code> - id:CBHelper@cb</dd>
			
		
			
		
			
		
			
			<dd><code>serializable</code> - true</dd>
			
		
		</dl>

		<hr>
	
		
		<a name="interceptorService()"><!-- --></a>
		<h3>interceptorService</h3>

		<kbd>
			property any 
			<strong>interceptorService</strong>
			
		</kbd>

		<br><br>
		

		<dl>
		<dt><strong>Attributes:</strong></dt>
		
			
		
			
			<dd><code>required</code> - false</dd>
			
		
			
		
			
			<dd><code>inject</code> - coldbox:interceptorService</dd>
			
		
			
		
			
		
			
			<dd><code>serializable</code> - true</dd>
			
		
		</dl>

		<hr>
	
		
		<a name="log()"><!-- --></a>
		<h3>log</h3>

		<kbd>
			property any 
			<strong>log</strong>
			
		</kbd>

		<br><br>
		

		<dl>
		<dt><strong>Attributes:</strong></dt>
		
			
		
			
			<dd><code>required</code> - false</dd>
			
		
			
		
			
			<dd><code>inject</code> - logbox:logger:{this}</dd>
			
		
			
		
			
		
			
			<dd><code>serializable</code> - true</dd>
			
		
		</dl>

		<hr>
	
		
		<a name="mailService()"><!-- --></a>
		<h3>mailService</h3>

		<kbd>
			property any 
			<strong>mailService</strong>
			
		</kbd>

		<br><br>
		

		<dl>
		<dt><strong>Attributes:</strong></dt>
		
			
		
			
			<dd><code>required</code> - false</dd>
			
		
			
		
			
			<dd><code>inject</code> - coldbox:plugin:MailService</dd>
			
		
			
		
			
		
			
			<dd><code>serializable</code> - true</dd>
			
		
		</dl>

		<hr>
	
		
		<a name="renderer()"><!-- --></a>
		<h3>renderer</h3>

		<kbd>
			property any 
			<strong>renderer</strong>
			
		</kbd>

		<br><br>
		

		<dl>
		<dt><strong>Attributes:</strong></dt>
		
			
		
			
			<dd><code>required</code> - false</dd>
			
		
			
		
			
			<dd><code>inject</code> - provider:ColdBoxRenderer</dd>
			
		
			
		
			
		
			
			<dd><code>serializable</code> - true</dd>
			
		
		</dl>

		<hr>
	
		
		<a name="settingService()"><!-- --></a>
		<h3>settingService</h3>

		<kbd>
			property any 
			<strong>settingService</strong>
			
		</kbd>

		<br><br>
		

		<dl>
		<dt><strong>Attributes:</strong></dt>
		
			
		
			
			<dd><code>required</code> - false</dd>
			
		
			
		
			
			<dd><code>inject</code> - id:settingService@cb</dd>
			
		
			
		
			
		
			
			<dd><code>serializable</code> - true</dd>
			
		
		</dl>

		<hr>
	









<!-- ============ METHOD DETAIL ========== -->

<a name="method_detail"><!-- --></a>
<table class="table table-bordered">
	<tr class="info">
		<th colspan="1" align="left">
			<strong>Method Detail</strong>
		</th>
	</tr>
</table>


	
	<a name="activateURLs()"><!-- --></a>
	<h3>activateURLs</h3>
	
	<kbd>private any <strong>activateURLs</strong>(any text)</kbd>
	
	<br><br>

	
		<p>Activate URL's from text</p>
	

	
		
		
	

	
	

	
		<dl>
		<dt><strong>Parameters:</strong></dt>
		
		<dd><code>text</code></dd>
		
		</dl>
	

	

	</dl>
	<hr>

	
	<a name="anyKeywordMatch()"><!-- --></a>
	<h3>anyKeywordMatch</h3>
	
	<kbd>private boolean <strong>anyKeywordMatch</strong>([any comment], [any matchList])</kbd>
	
	<br><br>

	
		<p>Regex matching of a list of entries against a comment and matching keyword list</p>
	

	
		
		
	

	
	

	
		<dl>
		<dt><strong>Parameters:</strong></dt>
		
		<dd><code>comment</code></dd>
		
		<dd><code>matchList</code></dd>
		
		</dl>
	

	

	</dl>
	<hr>

	
	<a name="bulkStatus()"><!-- --></a>
	<h3>bulkStatus</h3>
	
	<kbd>public any <strong>bulkStatus</strong>([any commentID], [any status])</kbd>
	
	<br><br>

	
		<p>Bulk Updates</p>
	

	
		
		
	

	
	

	
		<dl>
		<dt><strong>Parameters:</strong></dt>
		
		<dd><code>commentID</code> - The list or array of ID's to bulk update</dd>
		
		<dd><code>status</code> - The status either 'approve' or 'moderate'</dd>
		
		</dl>
	

	

	</dl>
	<hr>

	
	<a name="deleteUnApprovedComments()"><!-- --></a>
	<h3>deleteUnApprovedComments</h3>
	
	<kbd>public void <strong>deleteUnApprovedComments</strong>([numeric expirationDays='0'])</kbd>
	
	<br><br>

	
		<p>Deletes unapproved comments</p>
	

	
		
		
	

	
	

	
		<dl>
		<dt><strong>Parameters:</strong></dt>
		
		<dd><code>expirationDays</code> - Required level of staleness in days to delete (0=all unapproved)</dd>
		
		</dl>
	

	

	</dl>
	<hr>

	
	<a name="findApprovedComments()"><!-- --></a>
	<h3>findApprovedComments</h3>
	
	<kbd>public any <strong>findApprovedComments</strong>([any contentID], [any contentType], [any max='0'], [any offset='0'], [any sortOrder='desc'])</kbd>
	
	<br><br>

	
		<p>Comment listing for UI of approved comments, returns struct of results=[comments,count]</p>
	

	
		
		
	

	
	

	
		<dl>
		<dt><strong>Parameters:</strong></dt>
		
		<dd><code>contentID</code> - The content ID to filter on</dd>
		
		<dd><code>contentType</code> - The content type discriminator to filter on</dd>
		
		<dd><code>max</code> - The maximum number of records to return, 0 means all</dd>
		
		<dd><code>offset</code> - The offset in the paging, 0 means 0</dd>
		
		<dd><code>sortOrder</code> - Sort the comments asc or desc, by default it is desc</dd>
		
		</dl>
	

	

	</dl>
	<hr>

	
	<a name="getApprovedCommentCount()"><!-- --></a>
	<h3>getApprovedCommentCount</h3>
	
	<kbd>public numeric <strong>getApprovedCommentCount</strong>()</kbd>
	
	<br><br>

	
		<p>Get the total number of approved comments in the system</p>
	

	
		
		
	

	
	

	

	

	</dl>
	<hr>

	
	<a name="getUnApprovedCommentCount()"><!-- --></a>
	<h3>getUnApprovedCommentCount</h3>
	
	<kbd>public numeric <strong>getUnApprovedCommentCount</strong>()</kbd>
	
	<br><br>

	
		<p>Get the total number of unapproved comments in the system</p>
	

	
		
		
	

	
	

	

	

	</dl>
	<hr>

	
	<a name="runModerationRules()"><!-- --></a>
	<h3>runModerationRules</h3>
	
	<kbd>private boolean <strong>runModerationRules</strong>(any comment, any settings)</kbd>
	
	<br><br>

	
		<p>Run moderation rules on an incoming comment and set of contentbox settings. If this method returns a false then the comment is moderated
and can continue to be saved. If returns false, then it is blocked and must NOT be saved.</p>
	

	
		
		
	

	
	

	
		<dl>
		<dt><strong>Parameters:</strong></dt>
		
		<dd><code>comment</code> - Comment to moderate check</dd>
		
		<dd><code>settings</code> - The contentbox settings to moderate against</dd>
		
		</dl>
	

	

	</dl>
	<hr>

	
	<a name="saveComment()"><!-- --></a>
	<h3>saveComment</h3>
	
	<kbd>public struct <strong>saveComment</strong>(any comment)</kbd>
	
	<br><br>

	
		<p>Save a comment according to our rules and process it. Returns a structure of information
results = [moderated:boolean,messages:array]</p>
	

	
		
		
	

	
	

	
		<dl>
		<dt><strong>Parameters:</strong></dt>
		
		<dd><code>comment</code> - The comment to try to save</dd>
		
		</dl>
	

	

	</dl>
	<hr>

	
	<a name="search()"><!-- --></a>
	<h3>search</h3>
	
	<kbd>public struct <strong>search</strong>([any search=''], [any isApproved], [any contentID], [any max='0'], [any offset='0'])</kbd>
	
	<br><br>

	
		<p>comment search returns struct with keys [comments,count]</p>
	

	
		
		
	

	
	

	
		<dl>
		<dt><strong>Parameters:</strong></dt>
		
		<dd><code>search</code></dd>
		
		<dd><code>isApproved</code></dd>
		
		<dd><code>contentID</code></dd>
		
		<dd><code>max</code></dd>
		
		<dd><code>offset</code></dd>
		
		</dl>
	

	

	</dl>
	<hr>

	
	<a name="sendNotificationEmails()"><!-- --></a>
	<h3>sendNotificationEmails</h3>
	
	<kbd>private void <strong>sendNotificationEmails</strong>(any comment, any settings)</kbd>
	
	<br><br>

	
		<p>Send a notification email for comments</p>
	

	
		
		
	

	
	

	
		<dl>
		<dt><strong>Parameters:</strong></dt>
		
		<dd><code>comment</code> - Comment to moderate check</dd>
		
		<dd><code>settings</code> - The contentbox settings to moderate against</dd>
		
		</dl>
	

	

	</dl>
	<hr>

	
	<a name="sendSubscriptionNotifications()"><!-- --></a>
	<h3>sendSubscriptionNotifications</h3>
	
	<kbd>public void <strong>sendSubscriptionNotifications</strong>(any comment)</kbd>
	
	<br><br>

	
		<p>Sends subscription emails to subscribers of the content</p>
	

	
		
		
	

	
	

	
		<dl>
		<dt><strong>Parameters:</strong></dt>
		
		<dd><code>comment</code> - The comment object</dd>
		
		</dl>
	

	

	</dl>
	<hr>

	
	<a name="userHasPreviousAcceptedComment()"><!-- --></a>
	<h3>userHasPreviousAcceptedComment</h3>
	
	<kbd>private boolean <strong>userHasPreviousAcceptedComment</strong>(any email)</kbd>
	
	<br><br>

	
		<p>Check if the user has already a comment in the system</p>
	

	
		
		
	

	
	

	
		<dl>
		<dt><strong>Parameters:</strong></dt>
		
		<dd><code>email</code> - The email address to check.</dd>
		
		</dl>
	

	

	</dl>
	<hr>




</body>
</html>

