component output="false" singleton{	property name="userBewirtungService"   inject="id:userBewirtungService";	property name="bewirtungsBelegService" inject="id:bewirtungsBelegService";	property name="sessionStorage"    	   inject="coldbox:plugin:SessionStorage";		// Default Action	function index(event,rc,prc){		rc.Summe = warenkoirn.summe();		prc.welcomeMessage = "Welcome to ContentBox Modular CMS!!!!!";		prc.testString = "testString";		event.setView( "main/index" );	}		function form(event,rc,prc){		prc.greetings="You are not logged in";		prc.warning1 = flash.get("warning", '' );		//getPlugin('sessionstorage').setVar(name="test", value="test2");		//writeDump(getPlugin('sessionstorage').getStorage());abort;		//prc.user = populateModel( userBewirtungService.new());		//writeDump(prc.user);abort;		//writeDump(prc.user.getreferenceID());abort;		//UserBewirtungService.save(prc.user);		//abort;		//writeDump(prc.service);		//writeDump(prc.service);abort;			event.setView( view="bewirtungsbeleg/form", layout="layouts/bewirtungLayout" );	}		function loginSuccess(event,rc,prc){		prc.greetings = flash.get("greetings",'');		prc.warning1 = flash.get("warning", '' );		prc.service = getModel( "userBewirtungService" );				populateModel(prc.service);		event.setView( view="bewirtungsbeleg/form", layout="layouts/bewirtungLayout" );	}		function logout(event,rc,prc){		sessionStorage.deleteVar("currentuserReferenceID");		sessionStorage.deleteVar("currentUserName");		prc.greetings = flash.get("greetings", 'You are not logged in' );		prc.warning1 = flash.get("warning", '' );		prc.service = getModel( "userBewirtungService" );				populateModel(prc.service);		event.setView( view="bewirtungsbeleg/form", layout="layouts/bewirtungLayout" );	}				function saveDocumentation(event,rc,prc){				if(sessionStorage.exists("currentUserReferenceID")){			prc.bewirtungsBeleg = getModel( "bewirtungsBeleg" );			//prc.bewirtungsBeleg.setMealDate(rc.mealDate);				bewirtungsBelegService.populate( target = prc.bewirtungsBeleg, memento = rc ,include= "mealDate,location1,location2,participants,occasion,price,currency,restaurant,currentDate,currentLocation");						prc.bewirtungsBeleg.setReferenceID(sessionStorage.getVar( "currentUserReferenceID" ));									getPlugin("FileUtils").uploadFile(fileField="documentScan",destination="C:/Temp",accept="image/jpeg,image/jpg,image/png,image/tiff");															//writeDump();abort;									//writeDump(rc.documentScan);abort;			//prc.bewirtungsBeleg.setDocumentScan(rc.documentScan);											bewirtungsBelegService.saveDocumentation(prc.bewirtungsBeleg);						//prc.bewirtungsBeleg.setParticipants(rc.participants);			//writeDump(listtoarray(rc.participants));			//abort;			//prc.bewirtungsBeleg.setParticipants(listtoarray(rc.participants)[1]);			//writeDump(prc.bewirtungsBeleg);abort;			prc.greetings = flash.get("greetings",  "You are logged in as " & sessionStorage.getVar( "currentUserName" ));			prc.warning1 = flash.get("warning", 'Saved in DB' );			event.setView( view="bewirtungsbeleg/form", layout="layouts/bewirtungLayout" );
		}		else{			prc.greetings = flash.get("greetings",'You are not logged in');			prc.warning1 = flash.get("warning", 'You are not logged in' );			event.setView( view="bewirtungsbeleg/form", layout="layouts/bewirtungLayout" );		}							}			/************************************** IMPLICIT ACTIONS *********************************************/	function onAppInit(event,rc,prc){	}	function onRequestStart(event,rc,prc){	}	function onRequestEnd(event,rc,prc){	}	function onSessionStart(event,rc,prc){	}	function onSessionEnd(event,rc,prc){		var sessionScope = event.getValue("sessionReference");		var applicationScope = event.getValue("applicationReference");	}	function onException(event,rc,prc){		//Grab Exception From request collection, placed by ColdBox		var exceptionBean = event.getValue("ExceptionBean");		//Place exception handler below:	}	function onMissingTemplate(event,rc,prc){		//Grab missingTemplate From request collection, placed by ColdBox		var missingTemplate = event.getValue("missingTemplate");	}}